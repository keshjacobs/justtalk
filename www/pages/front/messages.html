<ion-view cache-view="true" class="bg-grey">

  <ion-nav-bar class="bar transparent">

        <ion-nav-title class="text-center" align="center">
              <b>Messages</b>
        </ion-nav-title>
        
      
        <ion-nav-buttons side="left" menu-toggle="left">
          <img ng-if="!user" src="img/icon-green.png" style="margin-top: 4px !important;" class="bar-logo"/>
          <div ng-if="user" menu-toggle="left" class="profile-photo2" style="margin-top: 4px !important;" ng-style="{'background-image':'url('+media+user.photo+')'}"></div>
      </ion-nav-buttons>

        <!-- <ion-nav-buttons side="right">
            <button  ng-click="message_settings()" title="search" class="button button-sm button-clear button-dark">
                <span class="icon ion-gear-b"></span>
            </button>
        </ion-nav-buttons> -->

     
        
    </ion-nav-bar>
    <div class="search-bar">
        <label class="item item-input">
          <input type="text" ng-model="srch_msg" placeholder="Search for people and groups">
          &nbsp;&nbsp;&nbsp; <span class="ion ion-ios-search-strong"></span>&nbsp;&nbsp;&nbsp;
        </label>
      </div>
    <ion-content class="bg-grey header-content">
         
      

      <ion-refresher pulling-text="Pull to refresh" on-refresh="get_messages()"></ion-refresher>
      

              <!-- <div ng-show="user" class="row">  
                  <div class="col col-10" menu-toggle="left">
                    <div class="profile-photo2" ng-style="{'background-image':'url('+media+user.photo+')'}"></div>
                  </div>
                  <div class="col col-90">
                    <label class="item item-input item-light" style="height: 35px !important;border-radius: 5px !important; margin-left: 6px !important;">
                      <input type="text" ng-model="srch_msg" placeholder="Search for people and groups" style="border:none !important;color:rgb(8, 8, 8) !important; width: 80% !important;">
                      &nbsp;&nbsp;&nbsp; <span class="ion ion-search"></span>&nbsp;&nbsp;&nbsp;
                    </label>
                  </div> -->
                <!-- <button ui-sref="front.make_request" ng-if="t_id" class="button button-sm button-clear button-icon-right button-oran">
                  <span class="icon ion-plus-circled"></span>
              </button> -->
              <!-- </div> -->
            
            <div ui-sref="requests" ng-if="requests.length > 0" class="new_request"> 
              <span style="float: right !important;" class="ion ion-chevron-right pull-right"></span>
               <b>{{requests.length || 0}} requests </b>
            </div>

       
  
            <div ng-show="t_id">
            <div ng-if="!chats || chats.length < 1">
            <div class="text-center item item-body item-light">
                <div class="padding">
                  <br><br><br>
                  <span class="ion ion-chatboxes" style="font-size: 30px !important;opacity: 0.4 !important;"></span>
                  <br><br>
                <h4>No messages yet</h4>  <br>
                </div> 
               <br>
            </div>
            </div>
            </div>

            <ion-list>
            <div ng-include="'components/chat.html'" ng-repeat="chat in chats | filter:srch_msg | orderBy:'-last_modified' | unique:'_id'"></div>
            </ion-list>


      <!-- </div> -->
      
  
  
  

  


          <div ng-include src="'components/auth.html'"></div>


        <div class="gap"></div>
    </ion-content>

    
    <div ng-include src="'components/msg.html'"></div>
    <br>
    <div ng-include src="'components/now_playing.html'"></div>

  </ion-view>
  
